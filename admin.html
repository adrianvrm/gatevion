<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gatevion – Admin Dashboard</title>
  <meta name="description" content="Dashboard de administrare Gatevion – rezervări, mașini, aeroporturi, parteneri." />
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#0f172a',
            accent: '#38bdf8',
            soft: '#e5e7eb'
          },
          boxShadow: {
            soft: '0 18px 45px rgba(15,23,42,.14)'
          },
          borderRadius: {
            '2xl': '1.25rem'
          },
          fontFamily: {
            sans: ['Manrope','system-ui','-apple-system','BlinkMacSystemFont','Segoe UI','sans-serif']
          }
        }
      }
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="font-sans bg-slate-950 text-slate-50 min-h-screen">
  <div id="adminApp" class="min-h-screen flex">
    <!-- Sidebar -->
    <aside class="hidden md:flex flex-col w-72 bg-slate-950 border-r border-slate-800/60">
      <div class="flex items-center gap-3 px-6 pt-6 pb-4 border-b border-slate-800/60">
        <div class="h-9 w-9 rounded-2xl bg-slate-800/70 flex items-center justify-center shadow-soft">
          <span class="text-lg font-semibold tracking-tight">G</span>
        </div>
        <div>
          <div class="text-sm uppercase tracking-[0.18em] text-slate-400">Gatevion</div>
          <div class="text-sm font-medium text-slate-100">Admin dashboard</div>
        </div>
      </div>
      <nav class="flex-1 px-3 py-4 space-y-1" id="adminNav">
        <button data-section="reservations" class="admin-nav-item">
          <span>Rezervări</span>
        </button>
        <button data-section="cars" class="admin-nav-item">
          <span>Mașini</span>
        </button>
        <button data-section="airports" class="admin-nav-item">
          <span>Aeroporturi</span>
        </button>
        <button data-section="pricing" class="admin-nav-item">
          <span>Reguli de preț</span>
        </button>
        <button data-section="partners" class="admin-nav-item">
          <span>Parteneri</span>
        </button>
      </nav>
      <div class="px-6 py-4 border-t border-slate-800/60 flex items-center justify-between text-xs text-slate-500">
        <span id="adminUserLabel">Neautentificat</span>
        <button id="adminLogoutBtn" class="text-slate-400 hover:text-slate-100 transition">Logout</button>
      </div>
    </aside>

    <!-- Main area -->
    <main class="flex-1 bg-slate-900/60">
      <!-- Topbar -->
      <header class="flex items-center justify-between px-4 md:px-8 py-4 border-b border-slate-800/60 backdrop-blur">
        <div>
          <div class="text-xs md:text-sm uppercase tracking-[0.18em] text-slate-400">Panou administrare</div>
          <h1 class="text-lg md:text-2xl font-semibold text-slate-50">Gatevion control center</h1>
        </div>
        <div class="flex items-center gap-3">
          <span class="hidden md:inline-flex text-xs text-slate-400">Status API:</span>
          <span id="apiStatusBadge" class="inline-flex items-center gap-2 rounded-full border border-emerald-500/40 bg-emerald-500/10 px-3 py-1 text-xs text-emerald-300">
            <span class="inline-flex h-1.5 w-1.5 rounded-full bg-emerald-400 animate-pulse"></span>
            <span>Verificare...</span>
          </span>
        </div>
      </header>

      <!-- Content wrapper -->
      <section class="p-4 md:p-8">
        <!-- Login card -->
        <div id="adminLoginView" class="max-w-md mx-auto mt-10">
          <div class="bg-slate-900/90 border border-slate-800 rounded-2xl shadow-soft p-6 md:p-8">
            <h2 class="text-xl font-semibold mb-2 text-slate-50">Autentificare administrator</h2>
            <p class="text-sm text-slate-400 mb-6">Conectează-te cu contul de admin pentru a gestiona rezervările, mașinile și partenerii.</p>
            <form id="adminLoginForm" class="space-y-4">
              <div>
                <label class="form-label text-slate-200">Email</label>
                <input type="email" name="email" required class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="admin@gatevion.local" />
              </div>
              <div>
                <label class="form-label text-slate-200">Parolă</label>
                <input type="password" name="password" required class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="••••••••" />
              </div>
              <button type="submit" class="btn-primary w-full justify-center">Conectează-te</button>
              <p class="text-xs text-slate-500 mt-2">Utilizează contul implicit <span class="font-mono">admin@gatevion.local / Admin123!</span> sau creează alt cont admin direct în bază.</p>
            </form>
            <p id="adminLoginError" class="mt-3 text-xs text-rose-400 hidden"></p>
          </div>
        </div>

        <!-- Dashboard sections -->
        <div id="adminDashboardView" class="hidden space-y-8">
          <!-- Rezervări -->
          <section id="section-reservations" class="admin-section">
            <div class="flex items-center justify-between mb-4">
              <div>
                <h2 class="text-lg font-semibold text-slate-50">Rezervări</h2>
                <p class="text-xs text-slate-400">Rezervările venite din formularul de booking.</p>
              </div>
              <button id="refreshReservationsBtn" class="btn-secondary text-xs">Reîncarcă</button>
            </div>
            <div class="bg-slate-900/80 border border-slate-800 rounded-2xl overflow-hidden">
              <div class="overflow-x-auto">
                <table class="min-w-full text-sm">
                  <thead class="bg-slate-900/90 border-b border-slate-800">
                    <tr class="text-left text-slate-400">
                      <th class="px-4 py-2">ID</th>
                      <th class="px-4 py-2">Creată</th>
                      <th class="px-4 py-2">Client</th>
                      <th class="px-4 py-2">Rută</th>
                      <th class="px-4 py-2">Perioadă</th>
                      <th class="px-4 py-2">Mașină</th>
                      <th class="px-4 py-2">Status</th>
                      <th class="px-4 py-2"></th>
                    </tr>
                  </thead>
                  <tbody id="reservationsTableBody" class="divide-y divide-slate-800/70">
                    <!-- se populează din JS -->
                  </tbody>
                </table>
              </div>
            </div>
            <div id="reservationDetailsPanel" class="mt-4 hidden bg-slate-900/80 border border-slate-800 rounded-2xl p-4 text-xs text-slate-200">
              <!-- detalii rezervare -->
            </div>
          </section>

          <!-- Mașini -->
          <section id="section-cars" class="admin-section hidden">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">
              <div>
                <h2 class="text-lg font-semibold text-slate-50">Mașini</h2>
                <p class="text-xs text-slate-400">Gestionează flota disponibilă în Gatevion.</p>
              </div>
              <button id="refreshCarsBtn" class="btn-secondary text-xs">Reîncarcă</button>
            </div>
            <div class="grid gap-6 md:grid-cols-3">
              <div class="md:col-span-2 bg-slate-900/80 border border-slate-800 rounded-2xl p-4">
                <h3 class="text-sm font-semibold mb-3 text-slate-200">Flotă</h3>
                <div id="carsList" class="space-y-3 max-h-[420px] overflow-auto pr-1 text-xs">
                  <!-- carduri mașini -->
                </div>
              </div>
              <div class="bg-slate-900/80 border border-slate-800 rounded-2xl p-4">
                <h3 class="text-sm font-semibold mb-3 text-slate-200">Adaugă mașină</h3>
                <form id="addCarForm" class="space-y-3 text-xs">
                  <div>
                    <label class="form-label text-slate-200">Nume comercial</label>
                    <input name="name" required class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="VW Golf 8 sau similar" />
                  </div>
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="form-label text-slate-200">Brand</label>
                      <input name="brand" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                    <div>
                      <label class="form-label text-slate-200">Model</label>
                      <input name="model" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                  </div>
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="form-label text-slate-200">Categorie</label>
                      <input name="category" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="compact, suv, premium..." />
                    </div>
                    <div>
                      <label class="form-label text-slate-200">Transmisie</label>
                      <input name="transmission" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="automata / manuala" />
                    </div>
                  </div>
                  <div class="grid grid-cols-3 gap-2">
                    <div>
                      <label class="form-label text-slate-200">Locuri</label>
                      <input name="seats" type="number" min="1" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                    <div>
                      <label class="form-label text-slate-200">Uși</label>
                      <input name="doors" type="number" min="2" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                    <div>
                      <label class="form-label text-slate-200">Bagaje</label>
                      <input name="luggageCapacity" type="number" min="1" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                    <label class="inline-flex items-center gap-2 text-slate-300">
                      <input type="checkbox" name="isActive" checked class="rounded border-slate-700 bg-slate-950/60" />
                      <span>Activă în ofertă</span>
                    </label>
                  </div>
                  <button type="submit" class="btn-primary w-full justify-center text-xs">Salvează mașina</button>
                  <p id="addCarMessage" class="mt-2 text-xs text-slate-400"></p>
                </form>
              </div>
            </div>
          </section>

          <!-- Aeroporturi -->
          <section id="section-airports" class="admin-section hidden">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">
              <div>
                <h2 class="text-lg font-semibold text-slate-50">Aeroporturi</h2>
                <p class="text-xs text-slate-400">Aeroporturi pe care operează Gatevion.</p>
              </div>
              <button id="refreshAirportsBtn" class="btn-secondary text-xs">Reîncarcă</button>
            </div>
            <div class="grid gap-6 md:grid-cols-3">
              <div class="md:col-span-2 bg-slate-900/80 border border-slate-800 rounded-2xl p-4">
                <h3 class="text-sm font-semibold mb-3 text-slate-200">Listă aeroporturi</h3>
                <div id="airportsList" class="space-y-2 max-h-[360px] overflow-auto pr-1 text-xs">
                </div>
              </div>
              <div class="bg-slate-900/80 border border-slate-800 rounded-2xl p-4">
                <h3 class="text-sm font-semibold mb-3 text-slate-200">Adaugă aeroport</h3>
                <form id="addAirportForm" class="space-y-3 text-xs">
                  <div>
                    <label class="form-label text-slate-200">Cod (IATA)</label>
                    <input name="code" maxlength="3" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="OTP" required />
                  </div>
                  <div>
                    <label class="form-label text-slate-200">Nume</label>
                    <input name="name" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="Aeroportul Internațional Henri Coandă" required />
                  </div>
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="form-label text-slate-200">Oraș</label>
                      <input name="city" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                    <div>
                      <label class="form-label text-slate-200">Țară</label>
                      <input name="country" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                  </div>
                  <div>
                    <label class="form-label text-slate-200">Timezone</label>
                    <input name="timezone" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="Europe/Bucharest" />
                  </div>
                  <button type="submit" class="btn-primary w-full justify-center text-xs">Salvează aeroport</button>
                  <p id="addAirportMessage" class="mt-2 text-xs text-slate-400"></p>
                </form>
              </div>
            </div>
          </section>

          <!-- Pricing -->
          <section id="section-pricing" class="admin-section hidden">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">
              <div>
                <h2 class="text-lg font-semibold text-slate-50">Reguli de preț</h2>
                <p class="text-xs text-slate-400">Setează prețuri pe zi, în funcție de perioada de închiriere.</p>
              </div>
              <button id="refreshPricingBtn" class="btn-secondary text-xs">Reîncarcă</button>
            </div>
            <div class="grid gap-6 md:grid-cols-3">
              <div class="md:col-span-2 bg-slate-900/80 border border-slate-800 rounded-2xl p-4">
                <div class="flex items-center justify-between mb-3">
                  <h3 class="text-sm font-semibold text-slate-200">Reguli existente</h3>
                  <select id="pricingCarSelect" class="form-input bg-slate-950/60 border-slate-700 text-slate-50 text-xs w-56">
                    <option value="">Alege o mașină</option>
                  </select>
                </div>
                <div id="pricingRulesList" class="space-y-2 max-h-[360px] overflow-auto pr-1 text-xs"></div>
              </div>
              <div class="bg-slate-900/80 border border-slate-800 rounded-2xl p-4">
                <h3 class="text-sm font-semibold mb-3 text-slate-200">Adaugă regulă</h3>
                <form id="addPricingRuleForm" class="space-y-3 text-xs">
                  <div>
                    <label class="form-label text-slate-200">Mașină</label>
                    <select name="carId" id="addPricingCarSelect" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" required>
                      <option value="">Selectează...</option>
                    </select>
                  </div>
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="form-label text-slate-200">Min. zile</label>
                      <input type="number" name="minDays" min="1" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                    <div>
                      <label class="form-label text-slate-200">Max. zile</label>
                      <input type="number" name="maxDays" min="1" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                  </div>
                  <div>
                    <label class="form-label text-slate-200">Preț de bază / zi (EUR)</label>
                    <input type="number" name="baseDailyPrice" min="0" step="1" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" required />
                  </div>
                  <div class="grid grid-cols-2 gap-2">
                    <div>
                      <label class="form-label text-slate-200">Sezon de la (YYYY-MM-DD)</label>
                      <input type="text" name="seasonStart" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                    <div>
                      <label class="form-label text-slate-200">Sezon până la</label>
                      <input type="text" name="seasonEnd" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                    </div>
                  </div>
                  <button type="submit" class="btn-primary w-full justify-center text-xs">Salvează regula</button>
                  <p id="addPricingMessage" class="mt-2 text-xs text-slate-400"></p>
                </form>
              </div>
            </div>
          </section>

          <!-- Parteneri -->
          <section id="section-partners" class="admin-section hidden">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">
              <div>
                <h2 class="text-lg font-semibold text-slate-50">Parteneri</h2>
                <p class="text-xs text-slate-400">Companiile de rent-a-car cu care lucrezi.</p>
              </div>
              <button id="refreshPartnersBtn" class="btn-secondary text-xs">Reîncarcă</button>
            </div>
            <div class="grid gap-6 md:grid-cols-3">
              <div class="md:col-span-2 bg-slate-900/80 border border-slate-800 rounded-2xl p-4">
                <h3 class="text-sm font-semibold mb-3 text-slate-200">Parteneri existenți</h3>
                <div id="partnersList" class="space-y-2 max-h-[360px] overflow-auto pr-1 text-xs"></div>
              </div>
              <div class="bg-slate-900/80 border border-slate-800 rounded-2xl p-4">
                <h3 class="text-sm font-semibold mb-3 text-slate-200">Adaugă partener</h3>
                <form id="addPartnerForm" class="space-y-3 text-xs">
                  <div>
                    <label class="form-label text-slate-200">Nume</label>
                    <input name="name" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="Ex: Premium Rent" required />
                  </div>
                  <div>
                    <label class="form-label text-slate-200">Endpoint API (opțional)</label>
                    <input name="apiEndpoint" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" placeholder="https://api.partener.ro/..." />
                  </div>
                  <div>
                    <label class="form-label text-slate-200">API key (opțional)</label>
                    <input name="apiKey" class="form-input bg-slate-950/60 border-slate-700 text-slate-50" />
                  </div>
                  <button type="submit" class="btn-primary w-full justify-center text-xs">Salvează partener</button>
                  <p id="addPartnerMessage" class="mt-2 text-xs text-slate-400"></p>
                </form>
              </div>
            </div>
          </section>
        </div>
      </section>
    </main>
  </div>

  <script src="./admin.js"></script>
</body>
</html>
